<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Security-Policy" content="
  default-src 'self';
  script-src 
    'self' 'unsafe-inline' 'unsafe-eval'
    https://maps.googleapis.com
    https://maps.gstatic.com
    https://www.gstatic.com
    https://apis.google.com
    https://accounts.google.com;
  connect-src
    'self'
    https://maps.googleapis.com
    https://maps.gstatic.com
    https://asia-northeast1-blissful-shore-458002-e9.cloudfunctions.net
    https://verifyusername-ictqzxcg5a-an.a.run.app
    https://searchplaces-ictqzxcg5a-an.a.run.app
    https://identitytoolkit.googleapis.com
    https://securetoken.googleapis.com
    https://accounts.google.com
    https://www.googleapis.com
    https://firestore.googleapis.com
    wss://firestore.googleapis.com;
  img-src 
    'self' 
    data: 
    https://maps.googleapis.com 
    https://maps.gstatic.com 
    https://maps.google.com 
    https://www.google.com;
  style-src 
    'self' 'unsafe-inline' 
    https://fonts.googleapis.com 
    https://maps.gstatic.com;
  font-src 
    'self' data: 
    https://fonts.gstatic.com;
  frame-src 
    'self' 
    https://accounts.google.com 
    https://*.firebaseapp.com 
    https://apis.google.com;
">

  <!-- Firebase 初期化モジュール -->
  <script type="module" src="./firebase-init.js"></script>
  <!-- アプリ本体 -->
  <script type="module" src="./main.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <h2>目的地近辺のベジタリアン料理のお店</h2>

  <!-- 認証フォーム -->
  <div id="auth-forms">
    <div id="signup-form" style="margin-top:1rem;">
      <h3>新規登録</h3>
      <input id="signup-userid"   type="text"     placeholder="ユーザーID" />
      <input id="signup-email"    type="email"    placeholder="メールアドレス" />
      <button id="btn-send-link">登録 & メール送信</button>
      <p id="signup-error" style="color:red; display:none;"></p>
    </div>
  </div>

  <!-- 認証成功ポップアップ -->
  <div id="auth-success" style="display:none; position:fixed; top:20%; left:50%; transform:translateX(-50%); padding:1rem; background:#fff; border:1px solid #ccc; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
    <p>認証に成功しました！アプリをお楽しみください。</p>
    <button id="success-ok">OK</button>
  </div>

  <!-- 検索コントロール -->
  <div id="controls" style="display:none; margin:1rem 0;">
    <input id="location-input" type="text" placeholder="目的地を入力してください" />
    <button id="search-btn">検索</button>
  </div>
  <p class="note">
    ※ 「❗️」マークは「ベジタリアン」「ヴィーガン」などの検索結果に出るものの  
    ビジネスプロフィールに「ベジタリアン料理があるお店」の表記がないお店。
  </p>
  <div class="map-container">
    <div id="map"></div>
    <ul id="results"></ul>
  </div>

</body>
</html>
